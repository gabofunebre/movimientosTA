{% extends "base.html" %}

{% block content %}
<div class="container mt-4" style="max-width:500px;">
  <form id="inv-form" data-type="{{ invoice.type }}" data-invoice-id="{{ invoice.id }}">
    <div class="mb-3">
      <label class="form-label">Fecha
        <input type="date" name="date" class="form-control" value="{{ invoice.date }}" required>
      </label>
    </div>
    <div class="mb-3">
      <label class="form-label">Número
        <input type="text" name="number" class="form-control" value="{{ invoice.number }}" required>
      </label>
    </div>
    <div class="mb-3">
      <label class="form-label">Concepto
        <input type="text" name="description" class="form-control" value="{{ invoice.description }}" required>
      </label>
    </div>
    <div class="mb-3">
      <label class="form-label">Total sin impuesto
        <input type="number" step="0.01" name="amount" class="form-control" value="{{ invoice.amount }}" required>
      </label>
    </div>
    <div class="row">
      <div class="col-6 mb-3">
        <label class="form-label">IVA %
          <input type="number" step="0.01" name="iva_percent" class="form-control" value="{{ invoice.iva_percent }}">
        </label>
      </div>
      <div class="col-6 mb-3">
        <label class="form-label">IVA $
          <input type="text" name="iva_amount" class="form-control" value="{{ invoice.iva_amount }}" readonly>
        </label>
      </div>
    </div>
    <div id="iibb-row" class="row{% if invoice.type == 'purchase' %} d-none{% endif %}">
      <div class="col-6 mb-3">
        <label class="form-label">IIBB %
          <input type="number" step="0.01" name="iibb_percent" class="form-control" value="{{ invoice.iibb_percent }}">
        </label>
      </div>
      <div class="col-6 mb-3">
        <label class="form-label">IIBB $
          <input type="text" name="iibb_amount" class="form-control" value="{{ invoice.iibb_amount }}" readonly>
        </label>
      </div>
    </div>
    <div class="mb-3">
      <span class="form-label d-block">Cuenta de facturación:</span>
      <span id="billing-account" class="fw-bold" style="color:{{ account.color if account else '' }}">{{ account.name if account else '' }}</span>
      <input type="hidden" name="account_id" value="{{ invoice.account_id }}">
    </div>
    <div id="inv-alert" class="alert d-none" role="alert"></div>
    <div class="d-flex justify-content-between">
      <button type="submit" class="btn btn-primary">Guardar</button>
      <a href="/invoice/{{ invoice.id }}" class="btn btn-secondary">Cancelar</a>
    </div>
  </form>
</div>
{% endblock %}

{% block scripts %}
<script type="module" src="/static/js/invoice_edit.js?v=1"></script>
{% endblock %}
